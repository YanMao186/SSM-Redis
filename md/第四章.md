## 第四章 MyBatis配置

### 概述

- **MyBatis**配置文件中所有出现的标签。

- ```xml
  <?xml version="1.0" encoding="UTF-8" ?>
  <configuration>							        <!-- 配置 -->
      <properties/>							    <!-- 属性 -->
      <settings/>									<!-- 设置 -->
      <typeAliases/>							    <!-- 类型命名 -->
      <typeHandlers/>								<!-- 类型处理器 -->
      <objectFactory/>							<!-- 对象工厂 -->
      <plugins/>									<!-- 插件 -->
      <environments/>							    <!-- 配置环境 -->
          <environment>						    <!-- 环境变量 -->
              <transactionManager/>			    <!-- 事务管理器 -->
              <dataSource/>						<!-- 数据源 -->
          </environments>
      </environments>    
  	<databaseIdProvider/>						<!-- 数据库厂商标识 -->
  	<mappers/>									<!-- 映射器 -->
  </configuration>
  ```

- **MyBatis**配置项的**顺序不能颠倒**。如果颠倒了它们的顺序，那么在**MyBatis**启动阶段就会**发生异常**，导致程序**无法运行**。

### Properties属性

- **properties**属性可以给系统配置一些运行参数，可以放在**XML**文件或者**properties**文件中，而不是放在**Java**编码中，**MyBatis**提供了**3种方式**让我们使用**properties**。分别是：
  1. **property子元素**
  2. **properties文件**
  3. **程序代码传递**

#### property子元素

- ```xml
  ?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">
  <configuration>
      <properties>
  		<property name="database.driver" value="com.mysql.jdbc.Driver"/> 
      	<property name="database.url" value="jdbc:mysql://localhost:3306/chapter4"/> 
          <property name="database.username" value="root"/> 
          <property name="database.password" value="123456"/>
  	</properties>
  	<typeAliases><!-- 别名 -->
  		<typeAlias alias="role" type="com.learn.ssm.chapter4.pojo.Role"/>
  		<package name="com.learn.ssm.chapter4.pojo" />
  	</typeAliases>
  	<!-- 数据库环境 -->
  	<environments default="development">
  		<environment id="development">
  			<transactionManager type="JDBC" />
  			<dataSource type="com.learn.ssm.chapter4.datasource.DbcpDataSourceFactory">
  				<property name="driver" value="${database.driver}" />
  				<property name="url" value="${database.url}" />
  				<property name="username" value="${database.username}" />
  				<property name="password" value="${database.password}" />
  			</dataSource>
  		</environment>
  	</environments>
  	<mappers>
  		<mapper resource="com/learn/ssm/chapter3/mapper/RoleMapper.xml" />
  	</mappers>
  </configuration>
  ```

- 这里使用了元素<properties>下的子元素<property>定义，用字符串**database.username**定义数据库用户名，然后就可以在数据库中引入这个定义好的属性参数，如**${database.username}**，这样定义一次就可以到处引用了。

#### 使用properties文件

- 使用**properties**文件是比较普遍的方法，一方面这个文件十分简单，其逻辑就是键值对应，我们可以配置多个键值放在一个**properties**文件中，也可以把多个键值放到多个**properties**文件中，这些都是允许的。

- ```properties
  database.driver=com.mysql.jdbc.Driver
  database.url=jdbc:mysql://localhost:3306/ssm-redis
  database.username=root
  database.password=root
  ```

- 在**MyBatis**中通过<properties>的属性**resource**来引入**properties**文件

- ````xml
  <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">
  <configuration>
  	<properties resource="jdbc.properties">
  	</properties>
  	<typeAliases><!-- 别名 -->
  	<typeAlias alias="role" type="com.learn.ssm.chapter4.pojo.Role"/>
  		<package name="com.learn.ssm.chapter4.pojo" />
  	</typeAliases>
  	<!-- 数据库环境 -->
  	<environments default="development">
  		<environment id="development">
  			<transactionManager type="JDBC" />
  			<dataSource type="com.learn.ssm.chapter4.datasource.DbcpDataSourceFactory">
  				<property name="driver" value="${database.driver}" />
  				<property name="url" value="${database.url}" />
  				<property name="username" value="${database.username}" />
  				<property name="password" value="${database.password}" />
  			</dataSource>
  		</environment>
  	</environments>
  	<mappers>
  		<mapper resource="com/learn/ssm/chapter3/mapper/RoleMapper.xml" />
  	</mappers>
  </configuration>
  ````

#### 使用程序传递方式传递参数

- 

